**express の使い方**

## express とは

Node.js のアプリケーションフレームワークの 1 つ。（他にもある）
（アプリケーションを作るための仕組みや機能をまとめたもの）

Node.js に独自の機能を盛り込み、より簡単にアプリケーションが作れるように設計されている。
他にもフレームワークはあるが、express の良いところは、Node.js の使い方に似せた設計になっている所。

## 最初にやること

〈下ごしらえ〉
0-1- フォルダを用意(mkdir)
0-2- "npm init --save express"で npm を初期化
0-3- EJS ダウンロード（"npm install --save ejs"）

〈index.js〉
1- express オブジェクトの用意
2- アプリの用意（app オブジェクト）
3- ルーティングの設定
3-1- `app.use(express.static(")`で引数に渡した静的な(static な)フォルダを参照するように指定する
(静的なファイルというのは、書かれているものを書き換えず、「書かれているまま使う」ファイルのことを指す)

4- 待ち受け開始

5- ターミナルで"node index.js"と打ち込み、サーバー立ち上げる
6- ブラウザで確認

## お約束

テンプレートは"views"フォルダに入れる
スタイルシートは"public"フォルダに入れる

## リンク設定の仕方

1- index.ejs 内に
`<a href= "<%= link.href%>" ><%= link.text %></a>`
と書き込む
（リンクオブジェクトに href と text という値を用意してリンクを作る）

2- index.js res.render 内に
`link: {href: "/", text: "トップに移動"}`などと書き込む

## クエリーパラメーターとは？

[クリたま.jp](https://online.dhw.co.jp/kuritama/query-string/)

> > クエリ文字列（URL パラメーター）とは、サーバーに情報を送るために URL の末尾につけ足す文字列（変数）のことです。「?」を URL の末尾につけ、その次に「パラメーター＝値」をつけ、複数のパラメーターをつけたい場合は「&」を使用します。この形式で、サーバーに送信したいデータを URL につけ加えることが可能です。

> > 例えば、基本の URL が「https:// ○△×□.jp/」だとして、基本の URL にクエリ文字列（URL パラメーター）を加えると「https:// ○△×□.jp/?●=▲×■&○=△×□」となります。

> > 下の URL の「?●=▲×■&○=△×□」の部分が、クエリ文字列（URL パラメーター）です。

## パラメーターはどこに保管されるのか？

リクエストのオブジェクトである req には、「query」というプロパティが用意されている。

これにはクエリーパラメーターをまとめたオブジェクトが設定されていて、キーを指定すれば取り出せるようになっている。
例）res.query.name、res.query.pass

## express でフォームを利用するには

1- ターミナルで「Body Parser」というモジュールをインストール
2- require("body-parser")でロード
3- bodyParser オブジェクトにある「urlencoded」というメソッドを app.use で実行
（「urlencoded」は URL エンコードされたボディを返す働きをする。
こうすることで送信されたフォームの内容が変換されて取り出せる。
第二引数に`{extended: false}`を渡す。
＊よくわからなかったら、フォームを使う時に必ず書いておくものと理解）
4- app.post で送信された値を取り出して利用
（req.body.message に、input で送られた値が入っている。
＊bodyParser によってフォームの値は req オブジェクトの「body」というプロパティにまとめられる。）

## Express Generator

Express アプリケーションを自動生成してくれるツール。
1-　アプリの基本部分を自動生成
（プログラム、テンプレート、スタイルシート、モジュール関係など全て一式で自動生成される）

2-必要なモジュールは全て揃っている
（後から都度インストールする必要がない）

3-スクリプトがモジュール方式になっている
